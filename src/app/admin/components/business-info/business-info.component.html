<!-- business-info.component.html -->
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200">
  <div class="max-w-[1400px] mx-auto p-5">

    <!-- ============================================
         HEADER
         ============================================ -->
    <header class="page-header">
      <div class="flex items-center justify-between gap-5 flex-wrap">

        <!-- Left Section -->
        <div class="flex items-center gap-4">
          <button
            mat-icon-button
            class="icon-btn"
            (click)="goBack()"
            matTooltip="Volver"
            aria-label="Volver">
            <mat-icon>arrow_back</mat-icon>
          </button>

          <div class="header-icon-container">
            <mat-icon>business</mat-icon>
          </div>

          <div>
            <h1 class="text-2xl font-bold text-slate-800 mb-1">Información de Empresa</h1>
            <p class="text-sm text-slate-600 flex items-center gap-2 font-medium">
              <span class="status-dot"></span>
              @if (businessExists()) {
                Gestiona la información completa de tu empresa
              } @else {
                Configura la información de tu empresa
              }
            </p>
          </div>
        </div>

        <!-- Right Section - Action Buttons -->
        <div class="flex items-center gap-3">
          @if (!editMode() && businessExists()) {
            <button
              mat-raised-button
              color="primary"
              (click)="enableEditMode()">
              <mat-icon>edit</mat-icon>
              Editar
            </button>
          }

          @if (editMode()) {
            <button
              mat-button
              (click)="cancelEdit()"
              [disabled]="saving()">
              <mat-icon>close</mat-icon>
              Cancelar
            </button>

            <button
              mat-raised-button
              color="primary"
              (click)="onSubmit()"
              [disabled]="saving() || businessForm.invalid">
              @if (saving()) {
                <mat-spinner diameter="20" class="mr-2"></mat-spinner>
              } @else {
                <mat-icon>save</mat-icon>
              }
              {{ saving() ? 'Guardando...' : 'Guardar Cambios' }}
            </button>
          }
        </div>
      </div>
    </header>

    <!-- ============================================
         LOADING STATE
         ============================================ -->
    @if (loading()) {
      <div class="empty-state">
        <mat-spinner diameter="50"></mat-spinner>
        <p class="mt-4 text-slate-600 font-medium">Cargando información...</p>
      </div>
    }

    <!-- ============================================
         MAIN CONTENT
         ============================================ -->
    @if (!loading()) {
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- ============================================
             LEFT COLUMN - FORMULARIO CON TABS (2/3 width)
             ============================================ -->
        <section class="lg:col-span-2">
          <div class="bg-white rounded-2xl border border-slate-200 shadow-soft overflow-hidden">

            <!-- Upload Progress Bar -->
            @if (uploadProgress() > 0 && uploadProgress() < 100) {
              <mat-progress-bar mode="determinate" [value]="uploadProgress()"></mat-progress-bar>
            }

            <!-- Tabs -->
            <mat-tab-group class="business-tabs" animationDuration="300ms">

              <!-- ==========================================
                   TAB 1: INFORMACIÓN GENERAL
                   ========================================== -->
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="tab-label">General</span>
                </ng-template>

                <div class="tab-content">
                  <form [formGroup]="businessForm">
                    <div class="space-y-6">

                      <!-- Nombre Comercial -->
                      <div class="space-y-2">
                        <label class="input-label-modern">
                          <mat-icon class="!text-lg text-blue-500">store</mat-icon>
                          Nombre Comercial *
                        </label>
                        <mat-form-field appearance="outline" class="w-full">
                          <input
                            matInput
                            formControlName="businessName"
                            placeholder="Ej: Mi Empresa"
                            maxlength="100">
                          <mat-hint align="end">{{ businessForm.get('businessName')?.value?.length || 0 }}/100</mat-hint>
                          @if (isFieldInvalid('businessName')) {
                            <mat-error>{{ getErrorMessage('businessName') }}</mat-error>
                          }
                        </mat-form-field>
                      </div>

                      <!-- Razón Social -->
                      <div class="space-y-2">
                        <label class="input-label-modern">
                          <mat-icon class="!text-lg text-blue-500">gavel</mat-icon>
                          Razón Social / Nombre Legal
                        </label>
                        <mat-form-field appearance="outline" class="w-full">
                          <input
                            matInput
                            formControlName="legalName"
                            placeholder="Ej: Mi Empresa S.A."
                            maxlength="150">
                          <mat-hint align="end">{{ businessForm.get('legalName')?.value?.length || 0 }}/150</mat-hint>
                          @if (isFieldInvalid('legalName')) {
                            <mat-error>{{ getErrorMessage('legalName') }}</mat-error>
                          }
                        </mat-form-field>
                      </div>

                      <!-- RIF / Tax ID -->
                      <div class="space-y-2">
                        <label class="input-label-modern">
                          <mat-icon class="!text-lg text-blue-500">badge</mat-icon>
                          RIF / Tax ID / NIT
                        </label>
                        <mat-form-field appearance="outline" class="w-full">
                          <input
                            matInput
                            formControlName="taxId"
                            placeholder="Ej: J-12345678-9"
                            maxlength="30">
                          @if (isFieldInvalid('taxId')) {
                            <mat-error>{{ getErrorMessage('taxId') }}</mat-error>
                          }
                        </mat-form-field>
                      </div>

                      <!-- Descripción -->
                      <div class="space-y-2">
                        <label class="input-label-modern">
                          <mat-icon class="!text-lg text-blue-500">description</mat-icon>
                          Descripción de la Empresa
                        </label>
                        <mat-form-field appearance="outline" class="w-full">
                          <textarea
                            matInput
                            formControlName="description"
                            placeholder="Breve descripción de tu empresa..."
                            rows="4"
                            maxlength="500"></textarea>
                          <mat-hint align="end">{{ businessForm.get('description')?.value?.length || 0 }}/500</mat-hint>
                        </mat-form-field>
                        <p class="text-xs text-slate-500 flex items-center gap-1.5">
                          <mat-icon class="!text-sm">info_outline</mat-icon>
                          Opcional: información adicional sobre tu empresa
                        </p>
                      </div>

                    </div>
                  </form>
                </div>
              </mat-tab>

              <!-- ==========================================
                   TAB 2: CONTACTO
                   ========================================== -->
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="tab-label">Contacto</span>
                </ng-template>

                <div class="tab-content">
                  <form [formGroup]="businessForm">
                    <div class="space-y-6">

                      <!-- Emails (dinámicos) -->
                      <div class="space-y-4">
                        <div class="flex items-center justify-between mb-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-green-500">email</mat-icon>
                            Emails de Contacto *
                          </label>
                          @if (editMode()) {
                            <button
                              mat-mini-fab
                              color="primary"
                              (click)="addEmail()"
                              matTooltip="Agregar email"
                              type="button">
                              <mat-icon>add</mat-icon>
                            </button>
                          }
                        </div>

                        <div formArrayName="emails" class="space-y-4">
                          @for (emailGroup of emails.controls; track $index) {
                            <div [formGroupName]="$index" class="flex gap-3 items-start">
                              <div class="flex-shrink-0" style="width: 140px;">
                                <mat-form-field appearance="outline" class="w-full">
                                  <input
                                    matInput
                                    formControlName="label"
                                    placeholder="Principal"
                                    maxlength="30">
                                  <mat-hint>Etiqueta</mat-hint>
                                </mat-form-field>
                              </div>
                              <div class="flex-1 min-w-0">
                                <mat-form-field appearance="outline" class="w-full">
                                  <input
                                    matInput
                                    type="email"
                                    formControlName="value"
                                    placeholder="email@empresa.com">
                                  @if (emailGroup.get('value')?.invalid && emailGroup.get('value')?.touched) {
                                    <mat-error>Email inválido</mat-error>
                                  }
                                </mat-form-field>
                              </div>
                              @if (editMode() && emails.length > 1) {
                                <div class="flex-shrink-0 flex items-center pt-2">
                                  <button
                                    mat-icon-button
                                    color="warn"
                                    (click)="removeEmail($index)"
                                    matTooltip="Eliminar email"
                                    type="button">
                                    <mat-icon>delete</mat-icon>
                                  </button>
                                </div>
                              }
                            </div>
                          }
                        </div>
                      </div>

                      <!-- Teléfonos (dinámicos) -->
                      <div class="space-y-4">
                        <div class="flex items-center justify-between mb-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-green-500">phone</mat-icon>
                            Teléfonos de Contacto
                          </label>
                          @if (editMode()) {
                            <button
                              mat-mini-fab
                              color="primary"
                              (click)="addPhone()"
                              matTooltip="Agregar teléfono"
                              type="button">
                              <mat-icon>add</mat-icon>
                            </button>
                          }
                        </div>

                        <div formArrayName="phones" class="space-y-4">
                          @for (phoneGroup of phones.controls; track $index) {
                            <div [formGroupName]="$index" class="flex gap-3 items-start">
                              <div class="flex-shrink-0" style="width: 140px;">
                                <mat-form-field appearance="outline" class="w-full">
                                  <input
                                    matInput
                                    formControlName="label"
                                    placeholder="Oficina"
                                    maxlength="30">
                                  <mat-hint>Etiqueta</mat-hint>
                                </mat-form-field>
                              </div>
                              <div class="flex-1 min-w-0">
                                <mat-form-field appearance="outline" class="w-full">
                                  <input
                                    matInput
                                    type="tel"
                                    formControlName="value"
                                    placeholder="+58 212 1234567"
                                    maxlength="20">
                                  @if (phoneGroup.get('value')?.invalid && phoneGroup.get('value')?.touched) {
                                    <mat-error>Teléfono inválido (mín. 7 caracteres)</mat-error>
                                  }
                                </mat-form-field>
                              </div>
                              @if (editMode() && phones.length > 1) {
                                <div class="flex-shrink-0 flex items-center pt-2">
                                  <button
                                    mat-icon-button
                                    color="warn"
                                    (click)="removePhone($index)"
                                    matTooltip="Eliminar teléfono"
                                    type="button">
                                    <mat-icon>delete</mat-icon>
                                  </button>
                                </div>
                              }
                            </div>
                          }
                        </div>
                      </div>

                      <!-- Website -->
                      <div class="space-y-2">
                        <label class="input-label-modern">
                          <mat-icon class="!text-lg text-green-500">language</mat-icon>
                          Sitio Web
                        </label>
                        <mat-form-field appearance="outline" class="w-full">
                          <input
                            matInput
                            type="url"
                            formControlName="website"
                            placeholder="https://www.empresa.com">
                          @if (isFieldInvalid('website')) {
                            <mat-error>{{ getErrorMessage('website') }}</mat-error>
                          }
                        </mat-form-field>
                      </div>

                    </div>
                  </form>
                </div>
              </mat-tab>

              <!-- ==========================================
                   TAB 3: DIRECCIÓN
                   ========================================== -->
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="tab-label">Dirección</span>
                </ng-template>

                <div class="tab-content">
                  <form [formGroup]="businessForm">
                    <div formGroupName="address">
                      <div class="space-y-6">

                        <!-- Calle -->
                        <div class="space-y-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-purple-500">home</mat-icon>
                            Calle y Número
                          </label>
                          <mat-form-field appearance="outline" class="w-full">
                            <input
                              matInput
                              formControlName="street"
                              placeholder="Ej: Av. Principal, Edif. Torre, Piso 5"
                              maxlength="200">
                            @if (isFieldInvalid('street', 'address')) {
                              <mat-error>{{ getErrorMessage('street', 'address') }}</mat-error>
                            }
                          </mat-form-field>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                          <!-- Ciudad -->
                          <div class="space-y-2">
                            <label class="input-label-modern">
                              <mat-icon class="!text-lg text-purple-500">location_city</mat-icon>
                              Ciudad
                            </label>
                            <mat-form-field appearance="outline" class="w-full">
                              <input
                                matInput
                                formControlName="city"
                                placeholder="Ej: Caracas"
                                maxlength="100">
                              @if (isFieldInvalid('city', 'address')) {
                                <mat-error>{{ getErrorMessage('city', 'address') }}</mat-error>
                              }
                            </mat-form-field>
                          </div>

                          <!-- Estado/Provincia -->
                          <div class="space-y-2">
                            <label class="input-label-modern">
                              <mat-icon class="!text-lg text-purple-500">map</mat-icon>
                              Estado / Provincia
                            </label>
                            <mat-form-field appearance="outline" class="w-full">
                              <input
                                matInput
                                formControlName="state"
                                placeholder="Ej: Distrito Capital"
                                maxlength="100">
                              @if (isFieldInvalid('state', 'address')) {
                                <mat-error>{{ getErrorMessage('state', 'address') }}</mat-error>
                              }
                            </mat-form-field>
                          </div>

                          <!-- Código Postal -->
                          <div class="space-y-2">
                            <label class="input-label-modern">
                              <mat-icon class="!text-lg text-purple-500">markunread_mailbox</mat-icon>
                              Código Postal
                            </label>
                            <mat-form-field appearance="outline" class="w-full">
                              <input
                                matInput
                                formControlName="zipCode"
                                placeholder="Ej: 1050"
                                maxlength="20">
                              @if (isFieldInvalid('zipCode', 'address')) {
                                <mat-error>{{ getErrorMessage('zipCode', 'address') }}</mat-error>
                              }
                            </mat-form-field>
                          </div>

                          <!-- País -->
                          <div class="space-y-2">
                            <label class="input-label-modern">
                              <mat-icon class="!text-lg text-purple-500">public</mat-icon>
                              País
                            </label>
                            <mat-form-field appearance="outline" class="w-full">
                              <input
                                matInput
                                formControlName="country"
                                placeholder="Ej: Venezuela"
                                maxlength="100">
                              @if (isFieldInvalid('country', 'address')) {
                                <mat-error>{{ getErrorMessage('country', 'address') }}</mat-error>
                              }
                            </mat-form-field>
                          </div>
                        </div>

                      </div>
                    </div>
                  </form>
                </div>
              </mat-tab>

              <!-- ==========================================
                   TAB 4: BRANDING
                   ========================================== -->
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="tab-label">Branding</span>
                </ng-template>

                <div class="tab-content">
                  <form [formGroup]="businessForm">

                    <!-- Logo Section -->
                    <div class="mb-8">
                      <h3 class="text-base font-semibold text-slate-800 mb-4 flex items-center gap-2">
                        <mat-icon class="!text-lg text-amber-500">image</mat-icon>
                        Logo de la Empresa
                      </h3>

                      <!-- Logo Preview -->
                      <div class="flex flex-col items-center gap-4 p-6 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300 mb-4">
                        @if (logoPreview()) {
                          <div class="relative group">
                            <div class="w-40 h-40 rounded-xl shadow-md flex items-center justify-center overflow-hidden bg-white">
                              <img
                                [src]="logoPreview()"
                                alt="Logo preview"
                                class="w-full h-full object-contain p-4">
                            </div>
                            @if (editMode()) {
                              <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                                <button
                                  mat-icon-button
                                  class="!text-white"
                                  (click)="logoPreview.set(''); selectedLogoFile.set(null)"
                                  matTooltip="Eliminar logo"
                                  aria-label="Eliminar logo">
                                  <mat-icon>delete</mat-icon>
                                </button>
                              </div>
                            }
                          </div>
                        } @else {
                          <div class="w-40 h-40 bg-slate-200 rounded-xl flex items-center justify-center">
                            <mat-icon class="!text-6xl text-slate-400">image</mat-icon>
                          </div>
                        }

                        <p class="text-sm text-slate-600 font-medium text-center">
                          {{ logoPreview() ? 'Logo actual' : 'Sin logo' }}
                        </p>
                      </div>

                      <!-- Upload Button -->
                      @if (editMode()) {
                        <div class="flex flex-col gap-3">
                          <input
                            type="file"
                            #logoInput
                            accept="image/*"
                            (change)="onLogoSelected($event)"
                            class="hidden">
                          <button
                            mat-raised-button
                            color="accent"
                            (click)="logoInput.click()"
                            class="w-full">
                            <mat-icon>cloud_upload</mat-icon>
                            {{ logoPreview() ? 'Cambiar Logo' : 'Subir Logo' }}
                          </button>
                          <p class="text-xs text-slate-500 text-center">
                            Formatos: JPG, PNG, SVG • Máx. 5MB
                          </p>
                        </div>
                      }

                      <!-- Hidden field -->
                      <input type="hidden" formControlName="logoUrl">
                    </div>

                    <mat-divider class="my-8"></mat-divider>

                    <!-- Colors Section -->
                    <div>
                      <h3 class="text-base font-semibold text-slate-800 mb-4 flex items-center gap-2">
                        <mat-icon class="!text-lg text-amber-500">color_lens</mat-icon>
                        Colores Corporativos
                      </h3>

                      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Color Primario -->
                        <div class="space-y-3">
                          <label class="input-label-modern">
                            Color Primario
                          </label>
                          <div class="flex items-center gap-3">
                            <input
                              type="color"
                              formControlName="primaryColor"
                              class="w-16 h-16 rounded-lg border-2 border-slate-300 cursor-pointer">
                            <div class="flex-1">
                              <input
                                matInput
                                formControlName="primaryColor"
                                placeholder="#3b82f6"
                                class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                            </div>
                          </div>
                          <p class="text-xs text-slate-500 flex items-center gap-1.5">
                            <mat-icon class="!text-sm">info_outline</mat-icon>
                            Color principal de tu marca
                          </p>
                        </div>

                        <!-- Color Secundario -->
                        <div class="space-y-3">
                          <label class="input-label-modern">
                            Color Secundario
                          </label>
                          <div class="flex items-center gap-3">
                            <input
                              type="color"
                              formControlName="secondaryColor"
                              class="w-16 h-16 rounded-lg border-2 border-slate-300 cursor-pointer">
                            <div class="flex-1">
                              <input
                                matInput
                                formControlName="secondaryColor"
                                placeholder="#8b5cf6"
                                class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                            </div>
                          </div>
                          <p class="text-xs text-slate-500 flex items-center gap-1.5">
                            <mat-icon class="!text-sm">info_outline</mat-icon>
                            Color complementario
                          </p>
                        </div>
                      </div>
                    </div>

                  </form>
                </div>
              </mat-tab>

              <!-- ==========================================
                   TAB 5: REDES SOCIALES
                   ========================================== -->
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="tab-label">Redes</span>
                </ng-template>

                <div class="tab-content">
                  <form [formGroup]="businessForm">
                    <div formGroupName="socialMedia">
                      <div class="space-y-6">

                        <!-- Facebook -->
                        <div class="space-y-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-[#1877F2]">facebook</mat-icon>
                            Facebook
                          </label>
                          <mat-form-field appearance="outline" class="w-full">
                            <input
                              matInput
                              type="url"
                              formControlName="facebook"
                              placeholder="https://www.facebook.com/tuempresa">
                            @if (isFieldInvalid('facebook', 'socialMedia')) {
                              <mat-error>{{ getErrorMessage('facebook', 'socialMedia') }}</mat-error>
                            }
                          </mat-form-field>
                        </div>

                        <!-- Instagram -->
                        <div class="space-y-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-[#E4405F]">camera_alt</mat-icon>
                            Instagram
                          </label>
                          <mat-form-field appearance="outline" class="w-full">
                            <input
                              matInput
                              type="url"
                              formControlName="instagram"
                              placeholder="https://www.instagram.com/tuempresa">
                            @if (isFieldInvalid('instagram', 'socialMedia')) {
                              <mat-error>{{ getErrorMessage('instagram', 'socialMedia') }}</mat-error>
                            }
                          </mat-form-field>
                        </div>

                        <!-- Twitter -->
                        <div class="space-y-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-[#1DA1F2]">tag</mat-icon>
                            Twitter / X
                          </label>
                          <mat-form-field appearance="outline" class="w-full">
                            <input
                              matInput
                              type="url"
                              formControlName="twitter"
                              placeholder="https://www.twitter.com/tuempresa">
                            @if (isFieldInvalid('twitter', 'socialMedia')) {
                              <mat-error>{{ getErrorMessage('twitter', 'socialMedia') }}</mat-error>
                            }
                          </mat-form-field>
                        </div>

                        <!-- LinkedIn -->
                        <div class="space-y-2">
                          <label class="input-label-modern">
                            <mat-icon class="!text-lg text-[#0A66C2]">work</mat-icon>
                            LinkedIn
                          </label>
                          <mat-form-field appearance="outline" class="w-full">
                            <input
                              matInput
                              type="url"
                              formControlName="linkedin"
                              placeholder="https://www.linkedin.com/company/tuempresa">
                            @if (isFieldInvalid('linkedin', 'socialMedia')) {
                              <mat-error>{{ getErrorMessage('linkedin', 'socialMedia') }}</mat-error>
                            }
                          </mat-form-field>
                        </div>

                      </div>
                    </div>
                  </form>
                </div>
              </mat-tab>

            </mat-tab-group>

          </div>
        </section>

        <!-- ============================================
             RIGHT COLUMN - PREVIEW (1/3 width)
             ============================================ -->
        <section class="lg:col-span-1">

          <!-- CARD: VISTA PREVIA -->
          <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-soft sticky top-24">
            <div class="flex items-center gap-3 mb-6">
              <mat-icon class="text-cyan-500 !text-2xl">preview</mat-icon>
              <h2 class="text-xl font-bold text-slate-800">Vista Previa</h2>
            </div>

            <div class="space-y-6">

              <!-- Preview: Logo -->
              <div class="space-y-2">
                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Logo</p>
                <div class="bg-slate-50 rounded-xl p-6 border border-slate-200 flex justify-center">
                  @if (logoPreview()) {
                    <div class="w-24 h-24 rounded-lg flex items-center justify-center overflow-hidden bg-white shadow-md">
                      <img
                        [src]="logoPreview()"
                        alt="Logo preview"
                        class="w-full h-full object-contain p-2">
                    </div>
                  } @else {
                    <div class="w-24 h-24 bg-slate-200 rounded-lg flex items-center justify-center">
                      <mat-icon class="!text-4xl text-slate-400">image</mat-icon>
                    </div>
                  }
                </div>
              </div>

              <!-- Preview: Información -->
              <div class="space-y-2">
                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Información</p>
                <div class="bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl p-6 border border-slate-300 space-y-3">
                  <h3 class="text-lg font-bold text-slate-800 text-center">
                    {{ businessForm.get('businessName')?.value || 'Nombre de Empresa' }}
                  </h3>
                  <p class="text-xs text-slate-600 text-center">
                    {{ businessForm.get('legalName')?.value || 'Razón Social' }}
                  </p>
                  @if (businessForm.get('description')?.value) {
                    <p class="text-xs text-slate-500 text-center leading-relaxed">
                      {{ businessForm.get('description')?.value }}
                    </p>
                  }
                </div>
              </div>

              <!-- Preview: Contacto -->
              <div class="space-y-2">
                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Contacto</p>
                <div class="bg-blue-50 rounded-xl p-4 border border-blue-200 space-y-2">
                  @for (emailGroup of emails.controls; track $index) {
                    @if (emailGroup.get('value')?.value) {
                      <div class="flex items-start gap-2">
                        <mat-icon class="!text-base text-blue-600 mt-0.5">email</mat-icon>
                        <div class="flex-1">
                          <p class="text-xs font-semibold text-blue-700">
                            {{ emailGroup.get('label')?.value || 'Email' }}
                          </p>
                          <p class="text-xs font-medium text-blue-900">
                            {{ emailGroup.get('value')?.value }}
                          </p>
                        </div>
                      </div>
                    }
                  }
                  @for (phoneGroup of phones.controls; track $index) {
                    @if (phoneGroup.get('value')?.value) {
                      <div class="flex items-start gap-2">
                        <mat-icon class="!text-base text-blue-600 mt-0.5">phone</mat-icon>
                        <div class="flex-1">
                          <p class="text-xs font-semibold text-blue-700">
                            {{ phoneGroup.get('label')?.value || 'Teléfono' }}
                          </p>
                          <p class="text-xs font-medium text-blue-900">
                            {{ phoneGroup.get('value')?.value }}
                          </p>
                        </div>
                      </div>
                    }
                  }
                </div>
              </div>

              <!-- Preview: Colores -->
              <div class="space-y-2">
                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Colores Corporativos</p>
                <div class="flex gap-3">
                  <div class="flex-1 space-y-2">
                    <div
                      class="w-full h-16 rounded-xl border-2 border-slate-200"
                      [style.background]="businessForm.get('primaryColor')?.value || '#3b82f6'">
                    </div>
                    <p class="text-xs text-slate-600 text-center font-mono">
                      {{ businessForm.get('primaryColor')?.value || '#3b82f6' }}
                    </p>
                  </div>
                  <div class="flex-1 space-y-2">
                    <div
                      class="w-full h-16 rounded-xl border-2 border-slate-200"
                      [style.background]="businessForm.get('secondaryColor')?.value || '#8b5cf6'">
                    </div>
                    <p class="text-xs text-slate-600 text-center font-mono">
                      {{ businessForm.get('secondaryColor')?.value || '#8b5cf6' }}
                    </p>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </section>

      </div>
    }

  </div>
</div>
