<!-- src/app/modules/clients/components/client-config/client-config.component.html -->
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200">
  <div class="max-w-[1400px] mx-auto p-5">

    <!-- HEADER -->
    <header class="page-header">
      <div class="flex items-center justify-between gap-5 flex-wrap">

        <!-- Left Section -->
        <div class="flex items-center gap-4">
          <button
            mat-icon-button
            class="icon-btn"
            (click)="goBack()"
            matTooltip="Volver a clientes">
            <mat-icon>arrow_back</mat-icon>
          </button>

          <div class="header-icon-container" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
            <mat-icon>settings</mat-icon>
          </div>

          <div>
            <h1 class="text-2xl font-bold text-slate-800 mb-1">Configuración del Módulo</h1>
            <p class="text-sm text-slate-600 flex items-center gap-2 font-medium">
              <span class="status-dot"></span>
              Administra campos personalizados y configuración
            </p>
          </div>
        </div>

        <!-- Right Section -->
        <div class="flex items-center gap-3">
          <button
            mat-icon-button
            class="icon-btn"
            (click)="loadConfig()"
            [disabled]="isLoading"
            matTooltip="Recargar configuración">
            <mat-icon>refresh</mat-icon>
          </button>

          <button
            mat-raised-button
            color="primary"
            (click)="addField()"
            [disabled]="isLoading">
            <mat-icon>add</mat-icon>
            Nuevo Campo
          </button>
        </div>
      </div>
    </header>

    <!-- LOADING STATE -->
    @if (isLoading && fields.length === 0) {
      <div class="empty-state">
        <mat-spinner diameter="50"></mat-spinner>
        <p class="mt-4 text-slate-600 font-medium">Cargando configuración...</p>
      </div>
    }

    <!-- MAIN CONTENT -->
    @if (!isLoading || fields.length > 0) {

      <!-- DISEÑADOR DE FORMULARIO -->
      <section class="mt-6">
        <app-form-designer
          [fields]="fields"
          [layout]="formLayout"
          (layoutChange)="onLayoutChange($event)"
          (fieldAdded)="onFieldAdded()">
        </app-form-designer>
      </section>

    }

  </div>
</div>
