<!-- src/app/shared/navbar/navbar.component.html -->
<nav class="navbar-container">
  <div class="navbar-content">
    <!-- LEFT SECTION - LOGO & APP NAME -->
    <div class="navbar-left">
      <!-- Logo -->
      <button 
      class="navbar-logo"
      (click)="goToDashboard()"
      matTooltip="Ir al Dashboard">
      
      <div 
        class="logo-icon" 
        [class.has-custom-logo]="logoUrl()"
        [class.has-default-icon]="!logoUrl()"
        [style.background]="logoUrl() ? logoBackgroundColor() : null">
        @if (logoUrl()) {
          <img [src]="logoUrl()" alt="Logo" />
        } @else {
          <mat-icon>admin_panel_settings</mat-icon>
        }
      </div>
    </button>
      
      <!-- App Name -->
      <div class="app-info">
        <h1 class="app-name">
          {{ appName() || 'Mi Aplicaci贸n' }}
        </h1>
        <span class="app-version">v2.0</span>
      </div>
    </div>

    <!-- CENTER SECTION - NAVIGATION -->
    <div class="navbar-center">
      <nav class="nav-links">
        <a
          class="nav-link"
          routerLink="/dashboard"
          routerLinkActive="active">
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </a>
        @if (hasModule('clients')) {
          <a
            class="nav-link"
            routerLink="/modules/clients"
            routerLinkActive="active">
            <mat-icon>group</mat-icon>
            <span>Clientes</span>
          </a>
        }
        @if (hasModule('materials')) {
          <a
            class="nav-link"
            routerLink="/modules/materials"
            routerLinkActive="active">
            <mat-icon>inventory_2</mat-icon>
            <span>Materiales</span>
          </a>
        }
        @if (hasModule('workers')) {
          <a
            class="nav-link"
            routerLink="/modules/workers"
            routerLinkActive="active">
            <mat-icon>engineering</mat-icon>
            <span>Trabajadores</span>
          </a>
        }
        @if (hasModule('projects')) {
          <a
            class="nav-link"
            routerLink="/modules/projects"
            routerLinkActive="active">
            <mat-icon>description</mat-icon>
            <span>Proyectos</span>
          </a>
        }
        @if (hasModule('work-planning')) {
          <a
            class="nav-link"
            routerLink="/modules/work-planning"
            routerLinkActive="active">
            <mat-icon>event_note</mat-icon>
            <span>Planificaci贸n</span>
          </a>
        }
        @if (isAdmin()) {
          <a
            class="nav-link"
            routerLink="/admin"
            routerLinkActive="active">
            <mat-icon>admin_panel_settings</mat-icon>
            <span>Admin</span>
          </a>
        }
      </nav>
    </div>

    <!-- RIGHT SECTION - USER BADGE -->
    <div class="navbar-right">
      <button 
        mat-button 
        [matMenuTriggerFor]="userMenu"
        class="user-badge-dashboard">
        <div class="flex items-center gap-3">
          <div 
            class="w-10 h-10 rounded-xl flex items-center justify-center text-white font-semibold text-sm"
            [style.background]="getAvatarColor()">
            {{ getUserInitials() }}
          </div>
          <div>
            <div class="font-semibold text-sm text-slate-800 leading-tight">
              {{ user()?.displayName }}
            </div>
            <span class="inline-block mt-0.5 bg-blue-100 text-blue-800 px-2 py-0.5 rounded-md text-xs font-semibold uppercase">
              {{ getUserRole() }}
            </span>
          </div>
        </div>
      </button>

      <!-- User Menu Dropdown -->
      <mat-menu #userMenu="matMenu" class="user-dropdown-menu">
        <div class="menu-header">
          <div 
            class="menu-avatar"
            [style.background]="getAvatarColor()">
            {{ getUserInitials() }}
          </div>
          <div class="menu-user-info">
            <div class="menu-user-name">{{ user()?.displayName }}</div>
            <div class="menu-user-email">{{ user()?.email }}</div>
            <div class="menu-user-role">
              <mat-icon class="role-icon">{{ isAdmin() ? 'shield' : 'person' }}</mat-icon>
              {{ getUserRole() }}
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="goToDashboard()">
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </button>
        @if (isAdmin()) {
          <button mat-menu-item (click)="goToAdmin()">
            <mat-icon>admin_panel_settings</mat-icon>
            <span>Panel de Admin</span>
          </button>
        }
        <button mat-menu-item (click)="goToProfile()">
          <mat-icon>account_circle</mat-icon>
          <span>Mi Perfil</span>
        </button>
        <button mat-menu-item (click)="goToSettings()">
          <mat-icon>settings</mat-icon>
          <span>Configuraci贸n</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="logout()" class="logout-item">
          <mat-icon>logout</mat-icon>
          <span>Cerrar Sesi贸n</span>
        </button>
      </mat-menu>
    </div>
  </div>
</nav>